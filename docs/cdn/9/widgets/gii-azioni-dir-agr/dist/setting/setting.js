System.register(["jimu-core/emotion","jimu-core","jimu-ui/advanced/data-source-selector"],function(e,i){var t={},a={},n={};return{setters:[function(e){t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){a.DataSourceManager=e.DataSourceManager,a.DataSourceTypes=e.DataSourceTypes,a.Immutable=e.Immutable,a.React=e.React},function(e){n.DataSourceSelector=e.DataSourceSelector}],execute:function(){e((()=>{var e={89(e){"use strict";e.exports=n},244(e){"use strict";e.exports=a},386(e){"use strict";e.exports=t}},i={};function l(t){var a=i[t];if(void 0!==a)return a.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,l),n.exports}l.d=(e,i)=>{for(var t in i)l.o(i,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},l.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var o={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(o),l.d(o,{__set_webpack_public_path__:()=>y,default:()=>j});var e=l(386),i=l(244),t=l(89);const a={roleCode:"DT",buttonText:"Prendi in carico",takeColor:"#0078da",integrazioneColor:"#e75a05",approvaColor:"#328c54",respingiColor:"#d13438",trasmettiColor:"#6f42c1",panelBg:"#ffffff",panelBorderColor:"#e5e7eb",panelBorderWidth:1,panelBorderRadius:10,panelPadding:12,maskBg:"#ffffff",maskBorderColor:"#e5e7eb",maskBorderWidth:1,maskBorderRadius:10,maskInnerPadding:12,maskOuterOffset:12,dividerColor:"#e5e7eb",titleFontSize:14,statusFontSize:13,msgFontSize:15,detailTitlePrefix:"Dettaglio rapporto n.",detailTitleHeight:28,detailTitlePaddingBottom:10,detailTitlePaddingLeft:0,detailTitleFontSize:14,detailTitleFontWeight:600,detailTitleColor:"rgba(0,0,0,0.85)",detailTitleBg:"transparent",btnBorderRadius:8,btnFontSize:14,btnFontWeight:600,btnPaddingX:14,btnPaddingY:10,rejectReasons:["Mancanza requisiti","Documentazione incompleta","Dati incoerenti","Richiesta non ammissibile","Altro"],reasonsZebraOddBg:"#ffffff",reasonsZebraEvenBg:"#f6f7f9",reasonsRowBorderColor:"rgba(0,0,0,0.10)",reasonsRowBorderWidth:1,reasonsRowRadius:8,tabs:[{id:"anagrafica",label:"Anagrafica",fields:[],hideEmpty:!1},{id:"violazione",label:"Violazione",fields:[],hideEmpty:!0},{id:"iter",label:"Iter",fields:[],isIterTab:!0,hideEmpty:!1},{id:"allegati",label:"Allegati",fields:[],hideEmpty:!0},{id:"azioni",label:"Azioni",fields:[],locked:!0}],showEditButtons:!0,editOverlayColor:"#7c3aed",editPageColor:"#5b21b6",editPageId:"editing-ti",fieldStatoTI:"stato_TI",fieldPresaTI:"presa_in_carico_TI",editMinStato:2,editMaxStato:2,editPresaRequiredVal:2,presets:[],activePresetId:""};(0,i.Immutable)(a);var n=function(e,i,t,a){return new(t||(t=Promise))(function(n,l){function o(e){try{s(a.next(e))}catch(e){l(e)}}function r(e){try{s(a.throw(e))}catch(e){l(e)}}function s(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t(function(e){e(i)})).then(o,r)}s((a=a.apply(e,i||[])).next())})};const r={wrap:{padding:"0 12px 32px",fontSize:13,background:"#1a1f2e",minHeight:"100%",color:"#e5e7eb"},sec:{fontSize:11,fontWeight:700,color:"#93c5fd",textTransform:"uppercase",letterSpacing:1.2,borderBottom:"1px solid rgba(255,255,255,0.10)",paddingBottom:6,marginBottom:14,marginTop:22,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},lbl:{fontSize:11.5,fontWeight:600,color:"#d1d5db",display:"block",marginBottom:4,marginTop:10},hint:{fontSize:10.5,color:"#a0aec0",marginTop:3,lineHeight:1.4},row2:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},row3:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:6},inp:{width:"100%",padding:"5px 8px",fontSize:12,border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,outline:"none",boxSizing:"border-box",background:"rgba(255,255,255,0.07)",color:"#e5e7eb"},grp:{fontSize:11,fontWeight:700,color:"#93c5fd",marginTop:14,marginBottom:6,paddingBottom:4,borderBottom:"1px solid rgba(255,255,255,0.07)"}},s=(e,i)=>{const t=Number(e);return Number.isFinite(t)?t:i};function d(e){return(null==e?void 0:e.asMutable)?e.asMutable({deep:!0}):e}function c(i){return(0,e.jsx)("input",{type:"text",value:i.value,onChange:e=>i.onChange(e.target.value),placeholder:i.placeholder,style:r.inp})}function g(i){return(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:5},children:[(0,e.jsx)("input",{type:"number",value:i.value,min:i.min,max:i.max,step:i.step||1,onChange:e=>i.onChange(Number(e.target.value)),style:Object.assign(Object.assign({},r.inp),{width:68})}),i.unit&&(0,e.jsx)("span",{style:{fontSize:11,color:"#a0aec0",flexShrink:0},children:i.unit})]})}function p(i){const t=/^#[0-9a-fA-F]{3,8}$/.test(i.value)?i.value:"#000000";return(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,e.jsx)("input",{type:"color",value:t,onChange:e=>i.onChange(e.target.value),style:{width:30,height:26,padding:2,border:"1px solid rgba(255,255,255,0.15)",borderRadius:5,cursor:"pointer",background:"transparent",flexShrink:0}}),(0,e.jsx)("input",{type:"text",value:i.value,onChange:e=>i.onChange(e.target.value),placeholder:"#rrggbb o rgba(...)",style:Object.assign(Object.assign({},r.inp),{flex:1,fontSize:11})})]})}function u(i){return(0,e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#d1d5db",cursor:"pointer",marginTop:8},children:[(0,e.jsx)("input",{type:"checkbox",checked:i.value,onChange:e=>i.onChange(e.target.checked)}),i.label]})}function b(i){return(0,e.jsx)("select",{value:i.value,onChange:e=>i.onChange(e.target.value),style:Object.assign(Object.assign({},r.inp),{cursor:"pointer"}),children:i.options.map(i=>(0,e.jsx)("option",{value:i.value,style:{background:"#1a1f2e",color:"#e5e7eb"},children:i.label},i.value))})}function x(i){return(0,e.jsxs)("div",{style:r.sec,onClick:i.onToggle,children:[(0,e.jsx)("span",{children:i.label}),(0,e.jsx)("span",{style:{fontSize:10,color:"#a0aec0"},children:i.open?"\u25b2":"\u25bc"})]})}function h(t){const a=Array.isArray(t.tabs)?t.tabs:[],[n,l]=i.React.useState(null),[o,s]=i.React.useState(null),d={border:"1px solid rgba(252,165,165,0.3)",background:"rgba(239,68,68,0.10)",borderRadius:5,cursor:"pointer",fontSize:11,padding:"3px 6px",color:"#fca5a5"};return(0,e.jsxs)("div",{style:{width:"100%"},children:[a.map((i,c)=>{const g=o===c;return(0,e.jsxs)("div",{draggable:!i.locked,onDragStart:()=>l(c),onDragOver:e=>{e.preventDefault(),s(c)},onDrop:()=>{null!==n&&n!==c&&((e,i)=>{if(e===i)return;const n=[...a],[l]=n.splice(e,1);n.splice(i,0,l),t.onChange(n)})(n,c),l(null),s(null)},onDragEnd:()=>{l(null),s(null)},style:{display:"flex",alignItems:"center",gap:6,padding:"5px 8px",borderRadius:6,border:"1px solid "+(g?"#93c5fd":"rgba(255,255,255,0.10)"),background:g?"rgba(59,130,246,0.10)":"rgba(255,255,255,0.04)",marginBottom:6,opacity:n===c?.45:1},children:[!i.locked&&(0,e.jsx)("span",{style:{cursor:"grab",fontSize:14,color:"rgba(255,255,255,0.35)",userSelect:"none"},children:"\u2630"}),(0,e.jsx)("input",{type:"text",style:Object.assign(Object.assign({},r.inp),{flex:1}),value:i.label,onChange:e=>{return i=c,n={label:e.target.value},t.onChange(a.map((e,t)=>t===i?Object.assign(Object.assign({},e),n):e));var i,n},disabled:i.locked&&"azioni"===i.id,placeholder:"Nome tab"}),i.locked&&(0,e.jsx)("span",{style:{fontSize:10,color:"#a0aec0",whiteSpace:"nowrap"},children:"bloccata"}),!i.locked&&(0,e.jsx)("button",{type:"button",style:d,onClick:()=>{var e,i;(null===(i=a[e=c])||void 0===i?void 0:i.locked)||t.onChange(a.filter((i,t)=>t!==e))},children:"\u2715"})]},i.id)}),(0,e.jsx)("button",{type:"button",onClick:()=>t.onChange([...a,{id:`tab_${Date.now()}`,label:"Nuova Tab",fields:[]}]),style:{width:"100%",padding:"6px",borderRadius:8,border:"1px dashed rgba(147,197,253,0.4)",background:"rgba(59,130,246,0.08)",color:"#93c5fd",cursor:"pointer",fontSize:12,fontWeight:600,marginTop:4},children:"\uff0b Aggiungi Tab"})]})}function f(t){const{tab:a,allFields:n}=t,[l,o]=i.React.useState(""),[r,s]=i.React.useState(!1),[d,c]=i.React.useState(null),[g,p]=i.React.useState(null),u=i.React.useRef(null),b=Array.isArray(a.fields)?a.fields:[],x=i.React.useMemo(()=>new Set(b),[b]);i.React.useEffect(()=>{if(!r)return;const e=e=>{var i;(null===(i=u.current)||void 0===i?void 0:i.contains(e.target))||s(!1)};return document.addEventListener("mousedown",e,!0),()=>document.removeEventListener("mousedown",e,!0)},[r]);const h=i.React.useMemo(()=>{const e=(l||"").trim().toLowerCase(),i=Array.isArray(n)?n:[];return e?i.filter(i=>(i.alias||"").toLowerCase().includes(e)||(i.name||"").toLowerCase().includes(e)):i},[l,n]),f=e=>{const i=h.map(e=>e.name).filter(Boolean);if(i.length)if("add"===e)t.onChange(Array.from(new Set([...b,...i])));else{const e=new Set(i);t.onChange(b.filter(i=>!e.has(i)))}},v=i.React.useMemo(()=>{const e=new Map;return(Array.isArray(n)?n:[]).forEach(i=>e.set(i.name,i)),b.map(i=>e.get(i)||{name:i,alias:i})},[b,n]),m=v.length?1===v.length?v[0].alias||v[0].name:`${v[0].alias||v[0].name} +${v.length-1}`:"Seleziona...",j={border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.08)",borderRadius:6,padding:"4px 8px",cursor:"pointer",fontSize:11,color:"#d1d5db"};return(0,e.jsxs)("div",{ref:u,style:{position:"relative",width:"100%",marginBottom:10},children:[(0,e.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>s(e=>!e),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||s(e=>!e)},style:{width:"100%",display:"flex",alignItems:"center",gap:8,padding:"7px 10px",border:"1px solid rgba(255,255,255,0.15)",borderRadius:8,background:"rgba(255,255,255,0.06)",color:"#e5e7eb",cursor:"pointer",boxSizing:"border-box",userSelect:"none"},children:[(0,e.jsx)("span",{style:{background:"rgba(147,197,253,0.25)",color:"#93c5fd",borderRadius:999,padding:"2px 8px",fontSize:11,fontWeight:700,flexShrink:0},children:b.length}),(0,e.jsx)("span",{style:{flex:1,fontSize:12,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m}),(0,e.jsx)("span",{style:{fontSize:10,color:"#a0aec0"},children:r?"\u25b2":"\u25bc"})]}),r&&(0,e.jsxs)("div",{style:{position:"absolute",zIndex:1e3,top:"calc(100% + 6px)",left:0,right:0,borderRadius:10,border:"1px solid rgba(0,0,0,0.2)",background:"#fff",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",padding:12,boxSizing:"border-box"},children:[(0,e.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:10},children:[(0,e.jsx)("span",{style:{fontWeight:700,fontSize:13,color:"#111"},children:a.label}),(0,e.jsx)("button",{type:"button",onClick:()=>s(!1),style:{border:"1px solid rgba(0,0,0,0.15)",borderRadius:6,padding:"4px 10px",background:"#f6f7f9",cursor:"pointer",fontSize:11,color:"#111"},children:"Chiudi"})]}),a.isIterTab&&(0,e.jsx)("div",{style:{fontSize:11,color:"#555",marginBottom:8},children:"I blocchi DT/DA sono sempre visibili. Qui aggiungi campi extra."}),(0,e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:6,fontSize:12,color:"#111",cursor:"pointer",marginBottom:10},children:[(0,e.jsx)("input",{type:"checkbox",checked:!!a.hideEmpty,onChange:e=>t.onTabPatch({hideEmpty:e.target.checked})}),"Nascondi campi vuoti (solo questa tab)"]}),(0,e.jsxs)("div",{style:{fontSize:11,fontWeight:700,color:"#111",marginBottom:5},children:["Selezionati (",b.length,") \u2014 trascina per riordinare"]}),(0,e.jsxs)("div",{style:{border:"1px solid rgba(0,0,0,0.12)",borderRadius:8,maxHeight:180,overflowY:"auto",marginBottom:10},children:[v.map((i,a)=>(0,e.jsxs)("div",{draggable:!0,onDragStart:()=>c(a),onDragEnter:()=>p(a),onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault(),null!==d&&((e,i)=>{if(e===i)return;const a=[...b],[n]=a.splice(e,1);a.splice(i,0,n),t.onChange(a)})(d,a),c(null),p(null)},onDragEnd:()=>{c(null),p(null)},style:{display:"flex",alignItems:"center",gap:6,padding:"5px 8px",borderBottom:"1px solid rgba(0,0,0,0.06)",background:a%2==0?"#fff":"#f9f9f9",outline:g===a?"2px dashed #2f6fed":"none",cursor:"grab"},children:[(0,e.jsx)("span",{style:{opacity:.5,fontSize:14,userSelect:"none"},children:"\u2261"}),(0,e.jsx)("span",{style:{flex:1,fontSize:12,color:"#111",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.alias||i.name}),(0,e.jsx)("button",{type:"button",onClick:()=>{return e=i.name,t.onChange(b.filter(i=>i!==e));var e},style:{border:"1px solid rgba(0,0,0,0.12)",borderRadius:5,padding:"2px 6px",cursor:"pointer",background:"#fff",color:"#d13438",fontSize:11},children:"\u2715"})]},i.name)),!v.length&&(0,e.jsx)("div",{style:{padding:"8px 10px",fontSize:12,color:"#888"},children:"Nessun campo selezionato."})]}),(0,e.jsx)("div",{style:{fontSize:11,fontWeight:700,color:"#111",marginBottom:5},children:"Tutti i campi"}),(0,e.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value),style:Object.assign(Object.assign({},{width:"100%",padding:"5px 8px",fontSize:12,border:"1px solid rgba(0,0,0,0.2)",borderRadius:6,outline:"none",boxSizing:"border-box",background:"#fff",color:"#111"}),{marginBottom:8}),placeholder:"Cerca..."}),(0,e.jsxs)("div",{style:{display:"flex",gap:6,marginBottom:8},children:[(0,e.jsx)("button",{type:"button",style:j,onClick:()=>f("add"),children:"Seleziona tutti"}),(0,e.jsx)("button",{type:"button",style:j,onClick:()=>f("remove"),children:"Deseleziona tutti"})]}),(0,e.jsxs)("div",{style:{border:"1px solid rgba(0,0,0,0.12)",borderRadius:8,maxHeight:220,overflowY:"auto"},children:[h.map((i,a)=>(0,e.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:8,padding:"5px 8px",borderBottom:"1px solid rgba(0,0,0,0.06)",background:a%2==0?"#fff":"#f9f9f9",cursor:"pointer",color:"#111",fontSize:12},children:[(0,e.jsx)("input",{type:"checkbox",checked:x.has(i.name),onChange:()=>(e=>{if(!e)return;const i=x.has(e);t.onChange(i?b.filter(i=>i!==e):[...b,e])})(i.name)}),(0,e.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.alias||i.name})]},i.name)),!h.length&&(0,e.jsx)("div",{style:{padding:"8px 10px",fontSize:12,color:"#888"},children:"Nessun campo."})]})]})]})}function v(t){const[a,n]=i.React.useState(""),l=(t.presets||[]).find(e=>String(e.id)===String(t.activePresetId)),o={border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.08)",borderRadius:6,padding:"4px 8px",fontSize:11,cursor:"pointer",color:"#d1d5db"},s=Object.assign(Object.assign({},o),{opacity:.4,cursor:"not-allowed"});return(0,e.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,e.jsx)(b,{value:t.activePresetId||"",onChange:e=>t.onSetActive(e),options:[{value:"",label:"\u2014 nessun preset \u2014"},...(t.presets||[]).map(e=>({value:String(e.id),label:e.name}))]}),(0,e.jsxs)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[(0,e.jsx)("button",{type:"button",style:l?o:s,disabled:!l,onClick:()=>l&&t.onApply(l),children:"Applica"}),(0,e.jsx)("button",{type:"button",style:l?o:s,disabled:!l,onClick:()=>l&&t.onUpdateActive(l.id),children:"Aggiorna"}),(0,e.jsx)("button",{type:"button",style:l?Object.assign(Object.assign({},o),{color:"#fca5a5"}):s,disabled:!l,onClick:()=>l&&t.onDelete(l.id),children:"Elimina"})]}),(0,e.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,e.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"Nome nuovo preset...",style:Object.assign(Object.assign({},r.inp),{flex:1})}),(0,e.jsx)("button",{type:"button",disabled:!a.trim(),style:a.trim()?Object.assign(Object.assign({},o),{padding:"4px 10px"}):Object.assign(Object.assign({},s),{padding:"4px 10px"}),onClick:()=>{const e=a.trim();e&&(t.onSaveNew(e),n(""))},children:"Salva"})]}),l&&(0,e.jsxs)("div",{style:r.hint,children:["Attivo: ",(0,e.jsx)("b",{style:{color:"#d1d5db"},children:l.name})]})]})}function m(e){return Array.isArray(e.tabs)&&e.tabs.length>0?e.tabs.map(e=>{var i;return Object.assign(Object.assign({},e),{hideEmpty:null!==(i=e.hideEmpty)&&void 0!==i?i:"violazione"===e.id})}):[{id:"anagrafica",label:"Anagrafica",fields:Array.isArray(e.anagraficaFields)?e.anagraficaFields:[],hideEmpty:!1},{id:"violazione",label:"Violazione",fields:Array.isArray(e.violazioneFields)?e.violazioneFields:[],hideEmpty:!0},{id:"iter",label:"Iter",fields:Array.isArray(e.iterExtraFields)?e.iterExtraFields:[],isIterTab:!0,hideEmpty:!1},{id:"allegati",label:"Allegati",fields:Array.isArray(e.allegatiFields)?e.allegatiFields:[],hideEmpty:!0},{id:"azioni",label:"Azioni",fields:[]}]}function j(l){var o,j,y,S,C,T,z,k,w,I,R,B,P,O;const[D,A]=i.React.useState("dati"),F=e=>A(i=>i===e?"":e),E=e=>D===e,M=Object.assign(Object.assign({},a),d(l.config)),W=l.config||(0,i.Immutable)(a),_=e=>{let t=W;Object.entries(e).forEach(([e,a])=>{t=["rejectReasons","tabs","anagraficaFields","violazioneFields","allegatiFields","iterExtraFields","presets"].includes(e)?t.set(e,(0,i.Immutable)(a||[])):t.set(e,a)}),l.onSettingChange({id:l.id,config:t})},N=d(null!==(o=l.useDataSources)&&void 0!==o?o:(0,i.Immutable)([]))||[],L=String((null===(j=null==N?void 0:N[0])||void 0===j?void 0:j.dataSourceId)||""),[V,q]=i.React.useState([]);i.React.useEffect(()=>{let e=!1;return(()=>{n(this,void 0,void 0,function*(){var t,a;if(L)try{const n=i.DataSourceManager.getInstance().getDataSource(L),l=(null===(a=null===(t=null==n?void 0:n.getSchema)||void 0===t?void 0:t.call(n))||void 0===a?void 0:a.fields)||{},o=Object.keys(l).map(e=>{const i=l[e]||{};return{name:e,alias:String(i.alias||i.label||i.title||e),type:String(i.type||"")}}).sort((e,i)=>(e.alias||e.name).localeCompare(i.alias||i.name,"it",{sensitivity:"base"}));e||q(o)}catch(i){e||q([])}else e||q([])})})(),()=>{e=!0}},[L]);const H=(U=null!==(y=M.rejectReasons)&&void 0!==y?y:a.rejectReasons,(Array.isArray(d(U))?d(U):[]).map(e=>String(e)).filter(Boolean));var U;const $=m(M),Y=(e,i)=>_({tabs:$.map((t,a)=>a===e?Object.assign(Object.assign({},t),i):t)});return(0,e.jsxs)("div",{style:r.wrap,children:[(0,e.jsx)(x,{id:"dati",label:"\u{1f4ca} Dati",open:E("dati"),onToggle:()=>F("dati")}),E("dati")&&(0,e.jsxs)("div",{children:[(0,e.jsx)(t.DataSourceSelector,{widgetId:l.id,types:(0,i.Immutable)([i.DataSourceTypes.FeatureLayer]),isMultiple:!0,useDataSources:l.useDataSources,useDataSourcesEnabled:l.useDataSourcesEnabled,onToggleUseDataEnabled:e=>l.onSettingChange({id:l.id,useDataSourcesEnabled:e}),onChange:e=>l.onSettingChange({id:l.id,useDataSources:e}),mustUseDataSource:!0}),(0,e.jsx)("div",{style:r.hint,children:"Seleziona una o pi\xf9 Data View / feature layer."}),(0,e.jsx)("label",{style:r.lbl,children:"Ruolo"}),(0,e.jsx)(b,{value:(M.roleCode||"DT").toUpperCase(),onChange:e=>_({roleCode:e}),options:[{value:"DT",label:"DT \u2013 Direttore Tecnico"},{value:"DA",label:"DA \u2013 Direttore Amministrativo"}]}),(0,e.jsx)("label",{style:r.lbl,children:'Testo pulsante "Prendi in carico"'}),(0,e.jsx)(c,{value:null!==(S=M.buttonText)&&void 0!==S?S:a.buttonText,onChange:e=>_({buttonText:e})})]}),(0,e.jsx)(x,{id:"tab",label:"\u{1f4d1} Gestione Tab",open:E("tab"),onToggle:()=>F("tab")}),E("tab")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:r.hint,children:"Modifica nomi, aggiungi/rimuovi tab, trascina \u2630 per riordinare."}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(h,{tabs:$,onChange:e=>_({tabs:e})})})]}),(0,e.jsx)(x,{id:"campi",label:"\u{1f5c2} Campi per Tab",open:E("campi"),onToggle:()=>F("campi")}),E("campi")&&(0,e.jsx)("div",{children:L?$.filter(e=>"azioni"!==e.id).map((i,t)=>(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:i.label}),(0,e.jsx)(f,{tab:i,allFields:V,onChange:e=>Y($.findIndex(e=>e.id===i.id),{fields:e}),onTabPatch:e=>Y($.findIndex(e=>e.id===i.id),e)})]},i.id)):(0,e.jsx)("div",{style:r.hint,children:"Seleziona prima un Data Source."})}),(0,e.jsx)(x,{id:"preset",label:"\u{1f4be} Preset campi",open:E("preset"),onToggle:()=>F("preset")}),E("preset")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:r.hint,children:"Salva/carica set di campi per le TAB (utile per ruoli diversi)."}),(0,e.jsx)("div",{style:{marginTop:8},children:(0,e.jsx)(v,{presets:M.presets||[],activePresetId:String(M.activePresetId||""),onSetActive:e=>_({activePresetId:e}),onApply:e=>{Array.isArray(e.tabs)?_({tabs:e.tabs,activePresetId:e.id||""}):_({tabs:m({anagraficaFields:e.anagraficaFields||[],violazioneFields:e.violazioneFields||[],allegatiFields:e.allegatiFields||[],iterExtraFields:e.iterExtraFields||[]}),activePresetId:e.id||""})},onSaveNew:e=>{const i=String(Date.now());_({presets:[...M.presets||[],{id:i,name:e,tabs:$}],activePresetId:i})},onUpdateActive:e=>_({presets:(M.presets||[]).map(i=>i.id===e?Object.assign(Object.assign({},i),{tabs:$}):i)}),onDelete:e=>{const i=(M.presets||[]).filter(i=>i.id!==e);_({presets:i,activePresetId:String(M.activePresetId||"")===e?"":String(M.activePresetId||"")})}})})]}),(0,e.jsx)(x,{id:"titolo",label:"\u{1f4dd} Titolo pratica",open:E("titolo"),onToggle:()=>F("titolo")}),E("titolo")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Testo"}),(0,e.jsx)(c,{value:null!==(C=M.detailTitlePrefix)&&void 0!==C?C:a.detailTitlePrefix,onChange:e=>_({detailTitlePrefix:e})}),(0,e.jsxs)("div",{style:r.row3,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Altezza"}),(0,e.jsx)(g,{value:s(M.detailTitleHeight,a.detailTitleHeight),onChange:e=>_({detailTitleHeight:e}),min:0,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Font sz"}),(0,e.jsx)(g,{value:s(M.detailTitleFontSize,a.detailTitleFontSize),onChange:e=>_({detailTitleFontSize:e}),min:10,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Font w"}),(0,e.jsx)(g,{value:s(M.detailTitleFontWeight,a.detailTitleFontWeight),onChange:e=>_({detailTitleFontWeight:e}),min:100,step:100})]})]}),(0,e.jsxs)("div",{style:r.row2,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Pad. bottom"}),(0,e.jsx)(g,{value:s(M.detailTitlePaddingBottom,a.detailTitlePaddingBottom),onChange:e=>_({detailTitlePaddingBottom:e}),min:0,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Pad. left"}),(0,e.jsx)(g,{value:s(M.detailTitlePaddingLeft,a.detailTitlePaddingLeft),onChange:e=>_({detailTitlePaddingLeft:e}),min:0,unit:"px"})]})]}),(0,e.jsx)("label",{style:r.lbl,children:"Colore testo"}),(0,e.jsx)(p,{value:String(null!==(T=M.detailTitleColor)&&void 0!==T?T:a.detailTitleColor),onChange:e=>_({detailTitleColor:e})})]}),(0,e.jsx)(x,{id:"maschera",label:"\u{1f5bc} Maschera",open:E("maschera"),onToggle:()=>F("maschera")}),E("maschera")&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:r.row2,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Outer offset"}),(0,e.jsx)(g,{value:s(M.maskOuterOffset,a.maskOuterOffset),onChange:e=>_({maskOuterOffset:e}),min:0,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Inner padding"}),(0,e.jsx)(g,{value:s(M.maskInnerPadding,a.maskInnerPadding),onChange:e=>_({maskInnerPadding:e,panelPadding:e}),min:0,unit:"px"})]})]}),(0,e.jsxs)("div",{style:r.row2,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Border width"}),(0,e.jsx)(g,{value:s(M.maskBorderWidth,a.maskBorderWidth),onChange:e=>_({maskBorderWidth:e,panelBorderWidth:e}),min:0,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Border radius"}),(0,e.jsx)(g,{value:s(M.maskBorderRadius,a.maskBorderRadius),onChange:e=>_({maskBorderRadius:e,panelBorderRadius:e}),min:0,unit:"px"})]})]}),(0,e.jsx)("label",{style:r.lbl,children:"Sfondo"}),(0,e.jsx)(p,{value:String(null!==(z=M.maskBg)&&void 0!==z?z:a.maskBg),onChange:e=>_({maskBg:e,panelBg:e})}),(0,e.jsx)("label",{style:r.lbl,children:"Colore bordo"}),(0,e.jsx)(p,{value:String(null!==(k=M.maskBorderColor)&&void 0!==k?k:a.maskBorderColor),onChange:e=>_({maskBorderColor:e,panelBorderColor:e})}),(0,e.jsx)("label",{style:r.lbl,children:"Colore divisori"}),(0,e.jsx)(p,{value:String(null!==(w=M.dividerColor)&&void 0!==w?w:a.dividerColor),onChange:e=>_({dividerColor:e})})]}),(0,e.jsx)(x,{id:"testi",label:"\u{1f524} Testi",open:E("testi"),onToggle:()=>F("testi")}),E("testi")&&(0,e.jsx)("div",{children:(0,e.jsxs)("div",{style:r.row3,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Titolo"}),(0,e.jsx)(g,{value:s(M.titleFontSize,a.titleFontSize),onChange:e=>_({titleFontSize:e}),min:10,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Stato"}),(0,e.jsx)(g,{value:s(M.statusFontSize,a.statusFontSize),onChange:e=>_({statusFontSize:e}),min:10,unit:"px"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Messaggi"}),(0,e.jsx)(g,{value:s(M.msgFontSize,a.msgFontSize),onChange:e=>_({msgFontSize:e}),min:10,unit:"px"})]})]})}),(0,e.jsx)(x,{id:"colori",label:"\u{1f3a8} Colori pulsanti",open:E("colori"),onToggle:()=>F("colori")}),E("colori")&&(0,e.jsx)("div",{children:[["takeColor","Prendi in carico"],["integrazioneColor","Integrazione"],["approvaColor","Approva"],["respingiColor","Respingi"],["trasmettiColor","Trasmetti a DA"]].map(([i,t])=>{var n;return(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:t}),(0,e.jsx)(p,{value:String(null!==(n=M[i])&&void 0!==n?n:a[i]),onChange:e=>_({[i]:e})})]},i)})}),(0,e.jsx)(x,{id:"motivazioni",label:"\u{1f4cb} Motivazioni respinta",open:E("motivazioni"),onToggle:()=>F("motivazioni")}),E("motivazioni")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:r.hint,children:'Voci del menu "Motivazione" quando si respinge una pratica.'}),(0,e.jsx)("div",{style:{marginTop:8,display:"grid",gap:6},children:H.map((i,t)=>(0,e.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,e.jsx)("input",{type:"text",style:Object.assign(Object.assign({},r.inp),{flex:1}),value:i,onChange:e=>{const i=H.slice();i[t]=e.target.value,_({rejectReasons:i})}}),(0,e.jsx)("button",{type:"button",style:{border:"1px solid rgba(252,165,165,0.3)",background:"rgba(239,68,68,0.10)",borderRadius:5,padding:"3px 8px",cursor:"pointer",color:"#fca5a5",fontSize:12},onClick:()=>{const e=H.slice();e.splice(t,1),_({rejectReasons:e})},children:"\u2715"})]},t))}),(0,e.jsx)("button",{type:"button",onClick:()=>_({rejectReasons:[...H,""]}),style:{marginTop:8,width:"100%",padding:"6px",borderRadius:8,border:"1px dashed rgba(147,197,253,0.4)",background:"rgba(59,130,246,0.08)",color:"#93c5fd",cursor:"pointer",fontSize:12,fontWeight:600},children:"\uff0b Aggiungi voce"})]}),(0,e.jsx)(x,{id:"editing",label:"\u270f\ufe0f Editing TI",open:E("editing"),onToggle:()=>F("editing")}),E("editing")&&(0,e.jsxs)("div",{children:[(0,e.jsx)(u,{value:!1!==M.showEditButtons,onChange:e=>_({showEditButtons:e}),label:"Mostra pulsanti Modifica"}),(0,e.jsxs)("div",{style:r.row2,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Colore overlay"}),(0,e.jsx)(p,{value:String(null!==(I=M.editOverlayColor)&&void 0!==I?I:a.editOverlayColor),onChange:e=>_({editOverlayColor:e})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Colore pagina"}),(0,e.jsx)(p,{value:String(null!==(R=M.editPageColor)&&void 0!==R?R:a.editPageColor),onChange:e=>_({editPageColor:e})})]})]}),(0,e.jsx)("label",{style:r.lbl,children:"Pagina editing (ID ExB)"}),(0,e.jsx)(c,{value:null!==(B=M.editPageId)&&void 0!==B?B:a.editPageId,onChange:e=>_({editPageId:e}),placeholder:"editing-ti"}),(0,e.jsx)("div",{style:r.grp,children:"Campi e condizioni"}),(0,e.jsxs)("div",{style:r.row2,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Campo stato TI"}),(0,e.jsx)(c,{value:null!==(P=M.fieldStatoTI)&&void 0!==P?P:a.fieldStatoTI,onChange:e=>_({fieldStatoTI:e})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Campo presa TI"}),(0,e.jsx)(c,{value:null!==(O=M.fieldPresaTI)&&void 0!==O?O:a.fieldPresaTI,onChange:e=>_({fieldPresaTI:e})})]})]}),(0,e.jsxs)("div",{style:r.row3,children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Val. presa req."}),(0,e.jsx)(g,{value:s(M.editPresaRequiredVal,a.editPresaRequiredVal),onChange:e=>_({editPresaRequiredVal:e}),min:0})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Stato min"}),(0,e.jsx)(g,{value:s(M.editMinStato,a.editMinStato),onChange:e=>_({editMinStato:e}),min:0})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:r.lbl,children:"Stato max"}),(0,e.jsx)(g,{value:s(M.editMaxStato,a.editMaxStato),onChange:e=>_({editMaxStato:e}),min:0})]})]}),(0,e.jsx)("div",{style:r.hint,children:"Il pulsante \xe8 attivo solo se stato_TI \xe8 tra min e max (inclusi) e presa = val. richiesto."})]}),(0,e.jsx)("div",{style:{marginTop:28,borderTop:"1px solid rgba(255,255,255,0.10)",paddingTop:16},children:(0,e.jsx)("button",{type:"button",onClick:()=>{window.confirm("Ripristinare tutti i valori predefiniti?")&&l.onSettingChange({id:l.id,config:(0,i.Immutable)(a)})},style:{padding:"6px 14px",borderRadius:7,border:"1px solid rgba(252,165,165,0.4)",background:"rgba(239,68,68,0.10)",color:"#fca5a5",fontSize:12,cursor:"pointer",fontWeight:600},children:"\u21ba Ripristina predefiniti"})})]})}function y(e){l.p=e}})(),o})())}}});