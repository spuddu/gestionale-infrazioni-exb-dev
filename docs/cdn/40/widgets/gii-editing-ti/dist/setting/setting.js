System.register(["jimu-core/emotion","jimu-core","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/setting-components"],function(e,a){var t={},i={},o={},n={};return{setters:[function(e){t.Fragment=e.Fragment,t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){i.DataSourceTypes=e.DataSourceTypes,i.Immutable=e.Immutable,i.React=e.React},function(e){o.DataSourceSelector=e.DataSourceSelector},function(e){n.MapWidgetSelector=e.MapWidgetSelector}],execute:function(){e((()=>{var e={89:e=>{"use strict";e.exports=o},244:e=>{"use strict";e.exports=i},298:e=>{"use strict";e.exports=n},386:e=>{"use strict";e.exports=t}},a={};function l(t){var i=a[t];if(void 0!==i)return i.exports;var o=a[t]={exports:{}};return e[t](o,o.exports,l),o.exports}l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{__set_webpack_public_path__:()=>c,default:()=>d});var e=l(386),a=l(244),t=l(89),i=l(298);const o={roleCode:"DT",buttonText:"Prendi in carico",takeColor:"#0078da",integrazioneColor:"#e75a05",approvaColor:"#328c54",respingiColor:"#d13438",trasmettiColor:"#6f42c1",btnBorderRadius:8,btnFontSize:13,btnFontWeight:600,btnPaddingX:16,btnPaddingY:8,panelBg:"#ffffff",panelBorderColor:"#e5e7eb",panelBorderWidth:1,panelBorderRadius:10,panelPadding:12,maskBg:"#ffffff",maskBorderColor:"#e5e7eb",maskBorderWidth:1,maskBorderRadius:10,maskInnerPadding:12,maskOuterOffset:12,dividerColor:"#e5e7eb",titleFontSize:14,statusFontSize:13,msgFontSize:15,detailTitlePrefix:"Dettaglio rapporto n.",detailTitleBg:"transparent",detailTitleHeight:28,detailTitlePaddingBottom:10,detailTitlePaddingLeft:0,detailTitleFontSize:14,detailTitleFontWeight:600,detailTitleColor:"rgba(0,0,0,0.85)",rejectReasons:["Mancanza requisiti","Documentazione incompleta","Dati incoerenti","Richiesta non ammissibile","Altro"],reasonsZebraOddBg:"#ffffff",reasonsZebraEvenBg:"#f6f7f9",reasonsRowBorderColor:"rgba(0,0,0,0.10)",reasonsRowBorderWidth:1,reasonsRowRadius:8,tabs:[{id:"anagrafica",label:"Anagrafica",fields:[],hideEmpty:!1},{id:"violazione",label:"Violazione",fields:[],hideEmpty:!0},{id:"iter",label:"Iter",fields:[],isIterTab:!0,hideEmpty:!1},{id:"allegati",label:"Allegati",fields:[],hideEmpty:!0},{id:"azioni",label:"Azioni",fields:[],locked:!0}],showEditButtons:!0,editOverlayColor:"#7c3aed",editPageColor:"#5b21b6",editPageId:"editing-ti",fieldStatoTI:"stato_TI",fieldPresaTI:"presa_in_carico_TI",editMinStato:2,editMaxStato:2,editPresaRequiredVal:2,showDatiGenerali:!1,enableCreateWithoutSelection:!0,useMapWidgetIds:[],officeLonWgs84:0,officeLatWgs84:0,presets:[],activePresetId:""};(0,a.Immutable)(o);const n={wrap:{padding:"0 12px 32px",fontSize:13,background:"#1a1f2e",minHeight:"100%",color:"#e5e7eb"},sec:{fontSize:11,fontWeight:700,color:"#93c5fd",textTransform:"uppercase",letterSpacing:1.2,borderBottom:"1px solid rgba(255,255,255,0.10)",paddingBottom:6,marginBottom:14,marginTop:22,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},lbl:{fontSize:11.5,fontWeight:600,color:"#d1d5db",display:"block",marginBottom:4,marginTop:10},hint:{fontSize:10.5,color:"#a0aec0",marginTop:3,lineHeight:1.5},inp:{width:"100%",padding:"5px 8px",fontSize:12,border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,outline:"none",boxSizing:"border-box",background:"rgba(255,255,255,0.07)",color:"#e5e7eb"},chk:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#d1d5db",cursor:"pointer",marginTop:10}};function s(a){return(0,e.jsxs)("div",{style:n.sec,onClick:a.onToggle,children:[(0,e.jsx)("span",{children:a.label}),(0,e.jsx)("span",{style:{fontSize:10,color:"#a0aec0"},children:a.open?"\u25b2":"\u25bc"})]})}function d(l){var r,d;const c=Object.assign(Object.assign({},o),(null==(p=l.config)?void 0:p.asMutable)?p.asMutable({deep:!0}):p);var p;const[g,u]=a.React.useState("datasource"),b=e=>u(a=>a===e?"":e),h=e=>g===e,m=(e,t)=>{const i=l.config||(0,a.Immutable)(o);l.onSettingChange({id:l.id,config:i.set?i.set(e,t):Object.assign(Object.assign({},c),{[e]:t})})};return(0,e.jsxs)("div",{style:n.wrap,children:[(0,e.jsx)(s,{id:"datasource",label:"\u{1f4ca} Datasource",open:h("datasource"),onToggle:()=>b("datasource")}),h("datasource")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:n.hint,children:"Feature layer delle pratiche TI. Serve per visualizzare i dettagli del record selezionato."}),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)(t.DataSourceSelector,{widgetId:l.id,types:(0,a.Immutable)([a.DataSourceTypes.FeatureLayer]),isMultiple:!1,useDataSources:l.useDataSources,useDataSourcesEnabled:l.useDataSourcesEnabled,onToggleUseDataEnabled:e=>l.onSettingChange({id:l.id,useDataSourcesEnabled:e}),onChange:e=>l.onSettingChange({id:l.id,useDataSources:e}),mustUseDataSource:!0})})]}),(0,e.jsx)(s,{id:"sorgenti",label:"\u{1f517} URL Layer",open:h("sorgenti"),onToggle:()=>b("sorgenti")}),h("sorgenti")&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("label",{style:n.lbl,children:["URL Feature Layer madre ",(0,e.jsx)("span",{style:{color:"#f87171"},children:"*"})]}),(0,e.jsx)("input",{type:"text",value:c.motherLayerUrl,onChange:e=>m("motherLayerUrl",e.target.value),placeholder:"https://services2.arcgis.com/.../FeatureServer/0",style:n.inp}),(0,e.jsx)("div",{style:n.hint,children:"URL diretto al layer. Usato per addFeatures (nuova pratica) e updateFeatures (modifica)."}),(0,e.jsxs)("label",{style:n.lbl,children:["URL Tabella Audit Log ",(0,e.jsx)("span",{style:{color:"#a0aec0"},children:"(opzionale)"})]}),(0,e.jsx)("input",{type:"text",value:c.auditTableUrl,onChange:e=>m("auditTableUrl",e.target.value),placeholder:"https://services2.arcgis.com/.../FeatureServer/1",style:n.inp}),(0,e.jsx)("div",{style:n.hint,children:"Se valorizzato, ogni modifica viene tracciata campo per campo. Se vuoto il log viene saltato."})]}),(0,e.jsx)(s,{id:"modalita",label:"\u2699 Modalit\xe0",open:h("modalita"),onToggle:()=>b("modalita")}),h("modalita")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:n.lbl,children:"Modalit\xe0 di visualizzazione"}),(0,e.jsxs)("select",{value:c.displayMode,onChange:e=>m("displayMode",e.target.value),style:n.inp,children:[(0,e.jsx)("option",{value:"page",style:{background:"#1a1f2e"},children:"Pagina intera"}),(0,e.jsx)("option",{value:"overlay",style:{background:"#1a1f2e"},children:"Overlay modal"})]}),"page"===c.displayMode&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("label",{style:n.lbl,children:"Hash pagina di ritorno (tasto Annulla)"}),(0,e.jsx)("input",{type:"text",value:c.closePageHash,onChange:e=>m("closePageHash",e.target.value),placeholder:"elenco-pratiche",style:n.inp}),(0,e.jsxs)("div",{style:n.hint,children:["L'utente viene reindirizzato a ",(0,e.jsxs)("code",{style:{color:"#93c5fd"},children:["#",c.closePageHash]})," quando clicca Annulla."]})]}),(0,e.jsxs)("label",{style:n.chk,children:[(0,e.jsx)("input",{type:"checkbox",checked:!!c.showDatiGenerali,onChange:e=>m("showDatiGenerali",e.target.checked)}),'Mostra sezione "Dati generali" nel form nuova pratica']}),(0,e.jsx)("div",{style:n.hint,children:"Se attivo, la tab Dati generali mostra tecnico, ufficio e data (read-only)."})]}),(0,e.jsx)(s,{id:"nuova",label:"\u{1f195} Nuova pratica (inline)",open:h("nuova"),onToggle:()=>b("nuova")}),h("nuova")&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("label",{style:n.chk,children:[(0,e.jsx)("input",{type:"checkbox",checked:!1!==c.enableCreateWithoutSelection,onChange:e=>m("enableCreateWithoutSelection",e.target.checked)}),'Abilita creazione senza selezione (pagina "Nuova pratica")']}),(0,e.jsx)("div",{style:n.hint,children:"Se attivo, il widget entra in modalit\xe0 CREATE quando non c'\xe8 alcuna selezione nell'Elenco."}),(0,e.jsx)("label",{style:n.lbl,children:"Mappa di pagina (per click localizzazione)"}),(0,e.jsx)("div",{style:{marginTop:6},children:(0,e.jsx)(i.MapWidgetSelector,{onSelect:e=>m("useMapWidgetIds",e),useMapWidgetIds:c.useMapWidgetIds})}),(0,e.jsx)("div",{style:n.hint,children:"Seleziona il widget Mappa presente nella pagina. Il widget ascolta i click e salva un punto WGS84."}),(0,e.jsx)("label",{style:n.lbl,children:"Coordinate ufficio (WGS84)"}),(0,e.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[(0,e.jsxs)("div",{style:{flex:"0 0 auto"},children:[(0,e.jsx)("div",{style:Object.assign(Object.assign({},n.hint),{marginTop:0}),children:"Lon"}),(0,e.jsx)("input",{type:"number",value:null!==(r=c.officeLonWgs84)&&void 0!==r?r:0,onChange:e=>m("officeLonWgs84",Number(e.target.value)),style:Object.assign(Object.assign({},n.inp),{width:120})})]}),(0,e.jsxs)("div",{style:{flex:"0 0 auto"},children:[(0,e.jsx)("div",{style:Object.assign(Object.assign({},n.hint),{marginTop:0}),children:"Lat"}),(0,e.jsx)("input",{type:"number",value:null!==(d=c.officeLatWgs84)&&void 0!==d?d:0,onChange:e=>m("officeLatWgs84",Number(e.target.value)),style:Object.assign(Object.assign({},n.inp),{width:120})})]})]}),(0,e.jsx)("div",{style:n.hint,children:"Usate come geometria di default quando la localizzazione non \xe8 obbligatoria (req_point=0) e l'utente non clicca in mappa."})]}),(0,e.jsx)(s,{id:"mappa",label:"\u{1f5fa} Mappa",open:h("mappa"),onToggle:()=>b("mappa")}),h("mappa")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:n.lbl,children:"Basemap"}),(0,e.jsx)("select",{value:c.mapBasemap,onChange:e=>m("mapBasemap",e.target.value),style:n.inp,children:[["osm","OpenStreetMap"],["streets","Streets (ESRI)"],["streets-navigation-vector","Streets Navigation"],["satellite","Satellite"],["hybrid","Hybrid (satellite + strade)"],["topo-vector","Topografico"]].map(([a,t])=>(0,e.jsx)("option",{value:a,style:{background:"#1a1f2e"},children:t},a))}),(0,e.jsx)("label",{style:n.lbl,children:"Zoom iniziale"}),(0,e.jsx)("input",{type:"number",value:c.mapZoom,min:6,max:20,onChange:e=>m("mapZoom",Number(e.target.value)),style:Object.assign(Object.assign({},n.inp),{width:80})})]}),(0,e.jsx)("div",{style:{marginTop:28,borderTop:"1px solid rgba(255,255,255,0.10)",paddingTop:16},children:(0,e.jsx)("button",{type:"button",onClick:()=>{window.confirm("Ripristinare i valori predefiniti?")&&l.onSettingChange({id:l.id,config:(0,a.Immutable)(o)})},style:{padding:"6px 14px",borderRadius:7,border:"1px solid rgba(252,165,165,0.4)",background:"rgba(239,68,68,0.10)",color:"#fca5a5",fontSize:12,cursor:"pointer",fontWeight:600},children:"\u21ba Ripristina predefiniti"})})]})}function c(e){l.p=e}})(),r})())}}});