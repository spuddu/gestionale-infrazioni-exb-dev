System.register(["jimu-core/emotion","jimu-core","jimu-ui/advanced/data-source-selector"],function(e,a){var t={},i={},o={};return{setters:[function(e){t.Fragment=e.Fragment,t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){i.DataSourceTypes=e.DataSourceTypes,i.Immutable=e.Immutable,i.React=e.React},function(e){o.DataSourceSelector=e.DataSourceSelector}],execute:function(){e((()=>{var e={89:e=>{"use strict";e.exports=o},244:e=>{"use strict";e.exports=i},386:e=>{"use strict";e.exports=t}},a={};function r(t){var i=a[t];if(void 0!==i)return i.exports;var o=a[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.d=(e,a)=>{for(var t in a)r.o(a,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},r.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var n={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(n),r.d(n,{__set_webpack_public_path__:()=>d,default:()=>s});var e=r(386),a=r(244),t=r(89);const i={roleCode:"DT",buttonText:"Prendi in carico",takeColor:"#0078da",integrazioneColor:"#e75a05",approvaColor:"#328c54",respingiColor:"#d13438",trasmettiColor:"#6f42c1",btnBorderRadius:8,btnFontSize:13,btnFontWeight:600,btnPaddingX:16,btnPaddingY:8,panelBg:"#ffffff",panelBorderColor:"#e5e7eb",panelBorderWidth:1,panelBorderRadius:10,panelPadding:12,maskBg:"#ffffff",maskBorderColor:"#e5e7eb",maskBorderWidth:1,maskBorderRadius:10,maskInnerPadding:12,maskOuterOffset:12,dividerColor:"#e5e7eb",titleFontSize:14,statusFontSize:13,msgFontSize:15,detailTitlePrefix:"Dettaglio rapporto n.",detailTitleBg:"transparent",detailTitleHeight:28,detailTitlePaddingBottom:10,detailTitlePaddingLeft:0,detailTitleFontSize:14,detailTitleFontWeight:600,detailTitleColor:"rgba(0,0,0,0.85)",rejectReasons:["Mancanza requisiti","Documentazione incompleta","Dati incoerenti","Richiesta non ammissibile","Altro"],reasonsZebraOddBg:"#ffffff",reasonsZebraEvenBg:"#f6f7f9",reasonsRowBorderColor:"rgba(0,0,0,0.10)",reasonsRowBorderWidth:1,reasonsRowRadius:8,tabs:[{id:"anagrafica",label:"Anagrafica",fields:[],hideEmpty:!1},{id:"violazione",label:"Violazione",fields:[],hideEmpty:!0},{id:"iter",label:"Iter",fields:[],isIterTab:!0,hideEmpty:!1},{id:"allegati",label:"Allegati",fields:[],hideEmpty:!0},{id:"azioni",label:"Azioni",fields:[],locked:!0}],showEditButtons:!0,editOverlayColor:"#7c3aed",editPageColor:"#5b21b6",editPageId:"editing-ti",fieldStatoTI:"stato_TI",fieldPresaTI:"presa_in_carico_TI",editMinStato:2,editMaxStato:2,editPresaRequiredVal:2,showDatiGenerali:!1,presets:[],activePresetId:""};(0,a.Immutable)(i);const o={wrap:{padding:"0 12px 32px",fontSize:13,background:"#1a1f2e",minHeight:"100%",color:"#e5e7eb"},sec:{fontSize:11,fontWeight:700,color:"#93c5fd",textTransform:"uppercase",letterSpacing:1.2,borderBottom:"1px solid rgba(255,255,255,0.10)",paddingBottom:6,marginBottom:14,marginTop:22,cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},lbl:{fontSize:11.5,fontWeight:600,color:"#d1d5db",display:"block",marginBottom:4,marginTop:10},hint:{fontSize:10.5,color:"#a0aec0",marginTop:3,lineHeight:1.5},inp:{width:"100%",padding:"5px 8px",fontSize:12,border:"1px solid rgba(255,255,255,0.15)",borderRadius:6,outline:"none",boxSizing:"border-box",background:"rgba(255,255,255,0.07)",color:"#e5e7eb"},chk:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#d1d5db",cursor:"pointer",marginTop:10}};function l(a){return(0,e.jsxs)("div",{style:o.sec,onClick:a.onToggle,children:[(0,e.jsx)("span",{children:a.label}),(0,e.jsx)("span",{style:{fontSize:10,color:"#a0aec0"},children:a.open?"\u25b2":"\u25bc"})]})}function s(r){const n=Object.assign(Object.assign({},i),(null==(s=r.config)?void 0:s.asMutable)?s.asMutable({deep:!0}):s);var s;const[d,c]=a.React.useState("datasource"),p=e=>c(a=>a===e?"":e),u=e=>d===e,g=(e,t)=>{const o=r.config||(0,a.Immutable)(i);r.onSettingChange({id:r.id,config:o.set?o.set(e,t):Object.assign(Object.assign({},n),{[e]:t})})};return(0,e.jsxs)("div",{style:o.wrap,children:[(0,e.jsx)(l,{id:"datasource",label:"\u{1f4ca} Datasource",open:u("datasource"),onToggle:()=>p("datasource")}),u("datasource")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:o.hint,children:"Feature layer delle pratiche TI. Serve per visualizzare i dettagli del record selezionato."}),(0,e.jsx)("div",{style:{marginTop:10},children:(0,e.jsx)(t.DataSourceSelector,{widgetId:r.id,types:(0,a.Immutable)([a.DataSourceTypes.FeatureLayer]),isMultiple:!1,useDataSources:r.useDataSources,useDataSourcesEnabled:r.useDataSourcesEnabled,onToggleUseDataEnabled:e=>r.onSettingChange({id:r.id,useDataSourcesEnabled:e}),onChange:e=>r.onSettingChange({id:r.id,useDataSources:e}),mustUseDataSource:!0})})]}),(0,e.jsx)(l,{id:"sorgenti",label:"\u{1f517} URL Layer",open:u("sorgenti"),onToggle:()=>p("sorgenti")}),u("sorgenti")&&(0,e.jsxs)("div",{children:[(0,e.jsxs)("label",{style:o.lbl,children:["URL Feature Layer madre ",(0,e.jsx)("span",{style:{color:"#f87171"},children:"*"})]}),(0,e.jsx)("input",{type:"text",value:n.motherLayerUrl,onChange:e=>g("motherLayerUrl",e.target.value),placeholder:"https://services2.arcgis.com/.../FeatureServer/0",style:o.inp}),(0,e.jsx)("div",{style:o.hint,children:"URL diretto al layer. Usato per addFeatures (nuova pratica) e updateFeatures (modifica)."}),(0,e.jsxs)("label",{style:o.lbl,children:["URL Tabella Audit Log ",(0,e.jsx)("span",{style:{color:"#a0aec0"},children:"(opzionale)"})]}),(0,e.jsx)("input",{type:"text",value:n.auditTableUrl,onChange:e=>g("auditTableUrl",e.target.value),placeholder:"https://services2.arcgis.com/.../FeatureServer/1",style:o.inp}),(0,e.jsx)("div",{style:o.hint,children:"Se valorizzato, ogni modifica viene tracciata campo per campo. Se vuoto il log viene saltato."})]}),(0,e.jsx)(l,{id:"modalita",label:"\u2699 Modalit\xe0",open:u("modalita"),onToggle:()=>p("modalita")}),u("modalita")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:o.lbl,children:"Modalit\xe0 di visualizzazione"}),(0,e.jsxs)("select",{value:n.displayMode,onChange:e=>g("displayMode",e.target.value),style:o.inp,children:[(0,e.jsx)("option",{value:"page",style:{background:"#1a1f2e"},children:"Pagina intera"}),(0,e.jsx)("option",{value:"overlay",style:{background:"#1a1f2e"},children:"Overlay modal"})]}),"page"===n.displayMode&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("label",{style:o.lbl,children:"Hash pagina di ritorno (tasto Annulla)"}),(0,e.jsx)("input",{type:"text",value:n.closePageHash,onChange:e=>g("closePageHash",e.target.value),placeholder:"elenco-pratiche",style:o.inp}),(0,e.jsxs)("div",{style:o.hint,children:["L'utente viene reindirizzato a ",(0,e.jsxs)("code",{style:{color:"#93c5fd"},children:["#",n.closePageHash]})," quando clicca Annulla."]})]}),(0,e.jsxs)("label",{style:o.chk,children:[(0,e.jsx)("input",{type:"checkbox",checked:!!n.showDatiGenerali,onChange:e=>g("showDatiGenerali",e.target.checked)}),'Mostra sezione "Dati generali" nel form nuova pratica']}),(0,e.jsx)("div",{style:o.hint,children:"Se attivo, la tab Dati generali mostra tecnico, ufficio e data (read-only)."})]}),(0,e.jsx)(l,{id:"mappa",label:"\u{1f5fa} Mappa",open:u("mappa"),onToggle:()=>p("mappa")}),u("mappa")&&(0,e.jsxs)("div",{children:[(0,e.jsx)("label",{style:o.lbl,children:"Basemap"}),(0,e.jsx)("select",{value:n.mapBasemap,onChange:e=>g("mapBasemap",e.target.value),style:o.inp,children:[["osm","OpenStreetMap"],["streets","Streets (ESRI)"],["streets-navigation-vector","Streets Navigation"],["satellite","Satellite"],["hybrid","Hybrid (satellite + strade)"],["topo-vector","Topografico"]].map(([a,t])=>(0,e.jsx)("option",{value:a,style:{background:"#1a1f2e"},children:t},a))}),(0,e.jsx)("label",{style:o.lbl,children:"Zoom iniziale"}),(0,e.jsx)("input",{type:"number",value:n.mapZoom,min:6,max:20,onChange:e=>g("mapZoom",Number(e.target.value)),style:Object.assign(Object.assign({},o.inp),{width:80})})]}),(0,e.jsx)("div",{style:{marginTop:28,borderTop:"1px solid rgba(255,255,255,0.10)",paddingTop:16},children:(0,e.jsx)("button",{type:"button",onClick:()=>{window.confirm("Ripristinare i valori predefiniti?")&&r.onSettingChange({id:r.id,config:(0,a.Immutable)(i)})},style:{padding:"6px 14px",borderRadius:7,border:"1px solid rgba(252,165,165,0.4)",background:"rgba(239,68,68,0.10)",color:"#fca5a5",fontSize:12,cursor:"pointer",fontWeight:600},children:"\u21ba Ripristina predefiniti"})})]})}function d(e){r.p=e}})(),n})())}}});